(this.webpackJsonpmy_social_network=this.webpackJsonpmy_social_network||[]).push([[0],{442:function(e,a,t){e.exports={cloud:"Message_cloud__2O3Wg",wrapper:"Message_wrapper__3yFJ3",before:"Message_before__13Aig",name:"Message_name__bMrdK",text:"Message_text__2kCaW",time:"Message_time__3JGjc"}},443:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__37SQj",ChooseDialogs:"Dialogs_ChooseDialogs__FyFCx",messages:"Dialogs_messages__3fddC",MessageRecipient:"Dialogs_MessageRecipient__2eDdC",unread:"Dialogs_unread__297ep",MessageSender:"Dialogs_MessageSender__1V1l5",enterMessage:"Dialogs_enterMessage__FqfRV",button:"Dialogs_button__3qPlI",dialogsItems:"Dialogs_dialogsItems__1w9ex",active:"Dialogs_active__3xDzq",newMessagesNotification:"Dialogs_newMessagesNotification__3kUpO"}},447:function(e,a,t){"use strict";t.r(a);var n=t(54),r=t(55),o=t(56),i=t(57),s=t(0),l=t.n(s),c=t(107),d=t(28),p=t(23),u=function(e){return{isAuth:e.auth.isAuth}},m=t(16),g=t(51),b=t(443),h=t.n(b),f=t(442),v=t.n(f),E=t(109),x=function(e){return l.a.createElement("div",{className:v.a.wrapper},l.a.createElement("div",{className:v.a.before},l.a.createElement(E.a,{avatar:e.avatar})),l.a.createElement("div",{className:v.a.cloud},l.a.createElement("div",{className:v.a.cloud},l.a.createElement("div",{className:v.a.name},e.name),e.text)))},_=t(428),y=function(e){return l.a.createElement("div",{className:v.a.wrapper},l.a.createElement("div",{className:v.a.cloud},l.a.createElement("div",{className:v.a.cloud},l.a.createElement("div",{className:v.a.name},e.name),e.text)))},k=t(427),j=t(379),O=t(429),D=t(424),w=t(1),C=t(2),M=(t(3),t(4)),N=t(6),S=t(44),W=s.forwardRef((function(e,a){var t=e.classes,n=e.className,r=Object(C.a)(e,["classes","className"]),o=s.useContext(S.a);return s.createElement("div",Object(w.a)({className:Object(M.a)(t.root,n,"flex-start"===o.alignItems&&t.alignItemsFlexStart),ref:a},r))})),P=Object(N.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(W),I=t(120),B=s.forwardRef((function(e,a){var t=e.children,n=e.classes,r=e.className,o=e.disableTypography,i=void 0!==o&&o,l=Object(C.a)(e,["children","classes","className","disableTypography"]);return s.createElement("div",Object(w.a)({className:Object(M.a)(n.root,r),ref:a},l),i?t:s.createElement(I.a,{component:"h2",variant:"h6"},t))})),F=Object(N.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(B),T=t(30),A=t(8),R=t(440),K=t(421),$=t(375),J=t(39),V=t(376),q={enter:J.b.enteringScreen,exit:J.b.leavingScreen},U=s.forwardRef((function(e,a){var t=e.BackdropProps,n=e.children,r=e.classes,o=e.className,i=e.disableBackdropClick,l=void 0!==i&&i,c=e.disableEscapeKeyDown,d=void 0!==c&&c,p=e.fullScreen,u=void 0!==p&&p,m=e.fullWidth,g=void 0!==m&&m,b=e.maxWidth,h=void 0===b?"sm":b,f=e.onBackdropClick,v=e.onClose,E=e.onEnter,x=e.onEntered,_=e.onEntering,y=e.onEscapeKeyDown,k=e.onExit,j=e.onExited,O=e.onExiting,D=e.open,N=e.PaperComponent,S=void 0===N?V.a:N,W=e.PaperProps,P=void 0===W?{}:W,I=e.scroll,B=void 0===I?"paper":I,F=e.TransitionComponent,T=void 0===F?$.a:F,J=e.transitionDuration,U=void 0===J?q:J,X=e.TransitionProps,Y=e["aria-describedby"],H=e["aria-labelledby"],L=Object(C.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),z=s.useRef();return s.createElement(R.a,Object(w.a)({className:Object(M.a)(r.root,o),BackdropComponent:K.a,BackdropProps:Object(w.a)({transitionDuration:U},t),closeAfterTransition:!0,disableBackdropClick:l,disableEscapeKeyDown:d,onEscapeKeyDown:y,onClose:v,open:D,ref:a},L),s.createElement(T,Object(w.a)({appear:!0,in:D,timeout:U,onEnter:E,onEntering:_,onEntered:x,onExit:k,onExiting:O,onExited:j,role:"none presentation"},X),s.createElement("div",{className:Object(M.a)(r.container,r["scroll".concat(Object(A.a)(B))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===z.current&&(z.current=null,f&&f(e),!l&&v&&v(e,"backdropClick"))},onMouseDown:function(e){z.current=e.target}},s.createElement(S,Object(w.a)({elevation:24,role:"dialog","aria-describedby":Y,"aria-labelledby":H},P,{className:Object(M.a)(r.paper,r["paperScroll".concat(Object(A.a)(B))],r["paperWidth".concat(Object(A.a)(String(h)))],P.className,u&&r.paperFullScreen,g&&r.paperFullWidth)}),n))))})),X=Object(N.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(U),Y=t(166),H=t.n(Y),L=t(27),z=t(168),G=t.n(z);function Q(e){var a=e.onClose,t=e.selectedValue,n=e.open;return l.a.createElement(X,{onClose:function(){a(t)},"aria-labelledby":"simple-dialog-title",open:n},l.a.createElement(F,{id:"simple-dialog-title"},"Set backup account"),l.a.createElement(O.a,null,e.dialogs.map((function(e){return l.a.createElement(D.a,{button:!0,onClick:function(){return t=e.id,void a(t);var t},key:e.key},l.a.createElement(P,null,l.a.createElement(j.a,{src:e.photos.small},l.a.createElement(H.a,null))),l.a.createElement(L.b,{style:{textDecoration:"none"},to:"/dialogs/".concat(e.id)},e.userName),e.hasNewMessages&&l.a.createElement(G.a,{color:"primary"}))}))))}function Z(e){var a=l.a.useState(!1),t=Object(g.a)(a,2),n=t[0],r=t[1],o=l.a.useState(e.dialogs),i=Object(g.a)(o,2),s=i[0],c=i[1];return l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){r(!0)}},"Open dialog"),l.a.createElement(Q,{selectedValue:s,open:n,onClose:function(e){r(!1),c(e)},dialogs:e.dialogs}))}var ee=t(374),ae=t(430),te=t(179),ne=t.n(te),re=Object(ee.a)((function(e){return{button:{margin:e.spacing(1)}}}));function oe(e){var a=re();return l.a.createElement("div",null,l.a.createElement(k.a,{variant:"contained",color:"primary",className:a.button,endIcon:l.a.createElement(ne.a,null),onClick:e.sendMessage},"Send"))}var ie=t(58),se=Object(ee.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{backgroundColor:"#eaf1f6"}}}})),le=function(e){var a=Object(p.g)();Object(s.useEffect)((function(){e.userId&&a.push(".")}),[]);var t,n=se(),r=Object(s.useState)(""),o=Object(g.a)(r,2),i=o[0],c=o[1];return e.fetching?l.a.createElement(ie.a,null):l.a.createElement("div",{style:{width:"100%"}},l.a.createElement(ae.a,{maxWidth:"sm",style:{padding:"10px"}},l.a.createElement(V.a,{className:n.root},l.a.createElement("div",{className:h.a.dialogs},l.a.createElement("div",{className:h.a.ChooseDialogs},l.a.createElement("div",null,l.a.createElement(Z,{dialogs:e.dialogsPage.dialogs}))),e.userId&&l.a.createElement("div",null,l.a.createElement("div",{className:h.a.messages},e.dialogsPage.messages.map((function(a){if(t=a.viewed?h.a.MessageRecipient:h.a.MessageRecipient+" "+h.a.unread,a.senderName===e.login)return l.a.createElement("div",{key:a.id,className:t},l.a.createElement(y,{name:a.senderName,text:a.body}));var n=e.dialogsPage.dialogs.find((function(a){if(a.id==e.userId)return a}));return l.a.createElement("div",{key:a.id,className:h.a.MessageSender},l.a.createElement(x,{name:a.senderName,text:a.body,avatar:n.photos.small||n.photos.large}))}))),e.selectedDialogId&&l.a.createElement("div",{className:h.a.enterMessage},l.a.createElement("div",null,l.a.createElement(_.a,{value:i,rows:3,onChange:function(e){return function(e){c(e.currentTarget.value)}(e)},placeholder:"     Type of message..."}),l.a.createElement("div",{className:h.a.button},l.a.createElement(oe,{sendMessage:function(){e.sendMessage(e.selectedDialogId,i),c("")}})))))))))};t.d(a,"DialogsContainer",(function(){return ce}));var ce=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.init(this.props.userId),this.props.handleDrawerClose()}},{key:"componentDidUpdate",value:function(e,a,t){this.props.userId!==e.userId&&this.props.updateDialog(this.props.userId)}},{key:"render",value:function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(le,this.props))}}]),t}(l.a.Component);a.default=Object(m.d)(Object(d.b)((function(e){return{dialogsPage:e.dialogsPage,currentDialogId:e.dialogsPage.dialogs.id,newMessagesCount:e.dialogsPage.newMessagesCount,selectedDialogId:e.dialogsPage.selectedDialogId,currentDialogMessagesCount:e.dialogsPage.currentDialogMessagesCount,login:e.auth.login,fetching:e.dialogsPage.fetching}}),{getDialogs:c.b,startDialog:c.h,getMessages:c.c,setCurrentDialogSuccess:c.g,init:c.e,updateDialog:c.i,sendMessage:c.f}),(function(e){var a=function(a){Object(i.a)(s,a);var t=Object(o.a)(s);function s(){return Object(n.a)(this,s),t.apply(this,arguments)}return Object(r.a)(s,[{key:"render",value:function(){return this.props.isAuth?l.a.createElement(e,this.props):l.a.createElement(p.a,{to:"./login"})}}]),s}(l.a.Component);return Object(d.b)(u)(a)}))(ce)}}]);
//# sourceMappingURL=0.bbba5bd1.chunk.js.map