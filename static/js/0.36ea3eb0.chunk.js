(this.webpackJsonpmy_social_network=this.webpackJsonpmy_social_network||[]).push([[0],{441:function(e,a,t){e.exports={cloud:"Message_cloud__2O3Wg",wrapper:"Message_wrapper__3yFJ3",before:"Message_before__13Aig",name:"Message_name__bMrdK",text:"Message_text__2kCaW",time:"Message_time__3JGjc"}},442:function(e,a,t){e.exports={dialogs:"Dialogs_dialogs__37SQj",ChooseDialogs:"Dialogs_ChooseDialogs__FyFCx",messages:"Dialogs_messages__3fddC",MessageRecipient:"Dialogs_MessageRecipient__2eDdC",unread:"Dialogs_unread__297ep",MessageSender:"Dialogs_MessageSender__1V1l5",enterMessage:"Dialogs_enterMessage__FqfRV",button:"Dialogs_button__3qPlI",dialogsItems:"Dialogs_dialogsItems__1w9ex",active:"Dialogs_active__3xDzq",newMessagesNotification:"Dialogs_newMessagesNotification__3kUpO"}},446:function(e,a,t){"use strict";t.r(a);var n=t(54),r=t(55),o=t(56),i=t(57),l=t(0),s=t.n(l),c=t(106),d=t(28),p=t(23),u=function(e){return{isAuth:e.auth.isAuth}},m=t(16),g=t(51),b=t(442),v=t.n(b),f=t(441),h=t.n(f),E=t(108),x=function(e){return s.a.createElement("div",{className:h.a.wrapper},s.a.createElement("div",{className:h.a.before},s.a.createElement(E.a,{avatar:e.avatar})),s.a.createElement("div",{className:h.a.cloud},s.a.createElement("div",{className:h.a.cloud},s.a.createElement("div",{className:h.a.name},e.name),e.text)))},_=t(427),k=function(e){return s.a.createElement("div",{className:h.a.wrapper},s.a.createElement("div",{className:h.a.cloud},s.a.createElement("div",{className:h.a.cloud},s.a.createElement("div",{className:h.a.name},e.name),e.text)))},y=t(426),j=t(378),O=t(428),D=t(423),w=t(1),C=t(2),M=(t(3),t(4)),N=t(6),S=t(44),W=l.forwardRef((function(e,a){var t=e.classes,n=e.className,r=Object(C.a)(e,["classes","className"]),o=l.useContext(S.a);return l.createElement("div",Object(w.a)({className:Object(M.a)(t.root,n,"flex-start"===o.alignItems&&t.alignItemsFlexStart),ref:a},r))})),P=Object(N.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(W),I=t(119),B=l.forwardRef((function(e,a){var t=e.children,n=e.classes,r=e.className,o=e.disableTypography,i=void 0!==o&&o,s=Object(C.a)(e,["children","classes","className","disableTypography"]);return l.createElement("div",Object(w.a)({className:Object(M.a)(n.root,r),ref:a},s),i?t:l.createElement(I.a,{component:"h2",variant:"h6"},t))})),F=Object(N.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(B),T=t(30),A=t(8),R=t(439),K=t(420),$=t(374),J=t(39),V=t(375),q={enter:J.b.enteringScreen,exit:J.b.leavingScreen},U=l.forwardRef((function(e,a){var t=e.BackdropProps,n=e.children,r=e.classes,o=e.className,i=e.disableBackdropClick,s=void 0!==i&&i,c=e.disableEscapeKeyDown,d=void 0!==c&&c,p=e.fullScreen,u=void 0!==p&&p,m=e.fullWidth,g=void 0!==m&&m,b=e.maxWidth,v=void 0===b?"sm":b,f=e.onBackdropClick,h=e.onClose,E=e.onEnter,x=e.onEntered,_=e.onEntering,k=e.onEscapeKeyDown,y=e.onExit,j=e.onExited,O=e.onExiting,D=e.open,N=e.PaperComponent,S=void 0===N?V.a:N,W=e.PaperProps,P=void 0===W?{}:W,I=e.scroll,B=void 0===I?"paper":I,F=e.TransitionComponent,T=void 0===F?$.a:F,J=e.transitionDuration,U=void 0===J?q:J,X=e.TransitionProps,Y=e["aria-describedby"],H=e["aria-labelledby"],L=Object(C.a)(e,["BackdropProps","children","classes","className","disableBackdropClick","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","onEnter","onEntered","onEntering","onEscapeKeyDown","onExit","onExited","onExiting","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps","aria-describedby","aria-labelledby"]),z=l.useRef();return l.createElement(R.a,Object(w.a)({className:Object(M.a)(r.root,o),BackdropComponent:K.a,BackdropProps:Object(w.a)({transitionDuration:U},t),closeAfterTransition:!0,disableBackdropClick:s,disableEscapeKeyDown:d,onEscapeKeyDown:k,onClose:h,open:D,ref:a},L),l.createElement(T,Object(w.a)({appear:!0,in:D,timeout:U,onEnter:E,onEntering:_,onEntered:x,onExit:y,onExiting:O,onExited:j,role:"none presentation"},X),l.createElement("div",{className:Object(M.a)(r.container,r["scroll".concat(Object(A.a)(B))]),onMouseUp:function(e){e.target===e.currentTarget&&e.target===z.current&&(z.current=null,f&&f(e),!s&&h&&h(e,"backdropClick"))},onMouseDown:function(e){z.current=e.target}},l.createElement(S,Object(w.a)({elevation:24,role:"dialog","aria-describedby":Y,"aria-labelledby":H},P,{className:Object(M.a)(r.paper,r["paperScroll".concat(Object(A.a)(B))],r["paperWidth".concat(Object(A.a)(String(v)))],P.className,u&&r.paperFullScreen,g&&r.paperFullWidth)}),n))))})),X=Object(N.a)((function(e){return{root:{"@media print":{position:"absolute !important"}},scrollPaper:{display:"flex",justifyContent:"center",alignItems:"center"},scrollBody:{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}},container:{height:"100%","@media print":{height:"auto"},outline:0},paper:{margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},paperScrollPaper:{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},paperScrollBody:{display:"inline-block",verticalAlign:"middle",textAlign:"left"},paperWidthFalse:{maxWidth:"calc(100% - 64px)"},paperWidthXs:{maxWidth:Math.max(e.breakpoints.values.xs,444),"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})},paperWidthSm:{maxWidth:e.breakpoints.values.sm,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.sm+64),{maxWidth:"calc(100% - 64px)"})},paperWidthMd:{maxWidth:e.breakpoints.values.md,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.md+64),{maxWidth:"calc(100% - 64px)"})},paperWidthLg:{maxWidth:e.breakpoints.values.lg,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.lg+64),{maxWidth:"calc(100% - 64px)"})},paperWidthXl:{maxWidth:e.breakpoints.values.xl,"&$paperScrollBody":Object(T.a)({},e.breakpoints.down(e.breakpoints.values.xl+64),{maxWidth:"calc(100% - 64px)"})},paperFullWidth:{width:"calc(100% - 64px)"},paperFullScreen:{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,"&$paperScrollBody":{margin:0,maxWidth:"100%"}}}}),{name:"MuiDialog"})(U),Y=t(165),H=t.n(Y),L=t(27);function z(e){var a=e.onClose,t=e.selectedValue,n=e.open;return s.a.createElement(X,{onClose:function(){a(t)},"aria-labelledby":"simple-dialog-title",open:n},s.a.createElement(F,{id:"simple-dialog-title"},"Set backup account"),s.a.createElement(O.a,null,e.dialogs.map((function(e){return s.a.createElement(D.a,{button:!0,onClick:function(){return t=e.id,void a(t);var t},key:e.key},s.a.createElement(P,null,s.a.createElement(j.a,{src:e.photos.small},s.a.createElement(H.a,null))),s.a.createElement(L.b,{style:{textDecoration:"none"},to:"/dialogs/".concat(e.id)},e.userName))}))))}function G(e){var a=s.a.useState(!1),t=Object(g.a)(a,2),n=t[0],r=t[1],o=s.a.useState(e.dialogs),i=Object(g.a)(o,2),l=i[0],c=i[1];return s.a.createElement("div",null,s.a.createElement("br",null),s.a.createElement(y.a,{variant:"contained",color:"primary",onClick:function(){r(!0)}},"Open dialog"),s.a.createElement(z,{selectedValue:l,open:n,onClose:function(e){r(!1),c(e)},dialogs:e.dialogs}))}var Q=t(373),Z=t(429),ee=t(177),ae=t.n(ee),te=Object(Q.a)((function(e){return{button:{margin:e.spacing(1)}}}));function ne(e){var a=te();return s.a.createElement("div",null,s.a.createElement(y.a,{variant:"contained",color:"primary",className:a.button,endIcon:s.a.createElement(ae.a,null),onClick:e.sendMessage},"Send"))}var re=Object(Q.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{backgroundColor:"#eaf1f6"}}}})),oe=function(e){var a=Object(p.g)();Object(l.useEffect)((function(){e.userId&&a.push(".")}),[]);var t,n=re(),r=Object(l.useState)(""),o=Object(g.a)(r,2),i=o[0],c=o[1];return s.a.createElement("div",null,s.a.createElement(Z.a,{maxWidth:"md",style:{padding:"10px"}},s.a.createElement(V.a,{className:n.root},s.a.createElement("div",{className:v.a.dialogs},s.a.createElement("div",{className:v.a.ChooseDialogs},s.a.createElement("div",null,s.a.createElement(G,{dialogs:e.dialogsPage.dialogs}))),e.userId&&s.a.createElement("div",null,s.a.createElement("div",{className:v.a.messages},e.dialogsPage.messages.map((function(a){if(t=a.viewed?v.a.MessageRecipient:v.a.MessageRecipient+" "+v.a.unread,a.senderName===e.login)return s.a.createElement("div",{key:a.id,className:t},s.a.createElement(k,{name:a.senderName,text:a.body}));var n=e.dialogsPage.dialogs.find((function(a){if(a.id==e.userId)return a}));return s.a.createElement("div",{key:a.id,className:v.a.MessageSender},s.a.createElement(x,{name:a.senderName,text:a.body,avatar:n.photos.small||n.photos.large}))}))),e.selectedDialogId&&s.a.createElement("div",{className:v.a.enterMessage},s.a.createElement("div",null,s.a.createElement(_.a,{value:i,rows:3,onChange:function(e){return function(e){c(e.currentTarget.value)}(e)},placeholder:"     Type of message..."}),s.a.createElement("div",{className:v.a.button},s.a.createElement(ne,{sendMessage:function(){e.sendMessage(e.selectedDialogId,i),c("")}})))))))))};t.d(a,"DialogsContainer",(function(){return ie}));var ie=function(e){Object(i.a)(t,e);var a=Object(o.a)(t);function t(){return Object(n.a)(this,t),a.apply(this,arguments)}return Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.init(this.props.userId),this.props.handleDrawerClose()}},{key:"componentDidUpdate",value:function(e,a,t){this.props.userId!==e.userId&&this.props.updateDialog(this.props.userId)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(oe,this.props))}}]),t}(s.a.Component);a.default=Object(m.d)(Object(d.b)((function(e){return{dialogsPage:e.dialogsPage,currentDialogId:e.dialogsPage.dialogs.id,newMessagesCount:e.dialogsPage.newMessagesCount,selectedDialogId:e.dialogsPage.selectedDialogId,currentDialogMessagesCount:e.dialogsPage.currentDialogMessagesCount,login:e.auth.login}}),{getDialogs:c.b,startDialog:c.h,getMessages:c.c,setCurrentDialogSuccess:c.g,init:c.e,updateDialog:c.i,sendMessage:c.f}),(function(e){var a=function(a){Object(i.a)(l,a);var t=Object(o.a)(l);function l(){return Object(n.a)(this,l),t.apply(this,arguments)}return Object(r.a)(l,[{key:"render",value:function(){return this.props.isAuth?s.a.createElement(e,this.props):s.a.createElement(p.a,{to:"./login"})}}]),l}(s.a.Component);return Object(d.b)(u)(a)}))(ie)}}]);
//# sourceMappingURL=0.36ea3eb0.chunk.js.map